// Generated by CIRCT firtool-1.128.0
module CLINT(	// src/main/scala/mycpu/peripherals/CLINT.scala:11:7
  input         clock,	// src/main/scala/mycpu/peripherals/CLINT.scala:11:7
                reset,	// src/main/scala/mycpu/peripherals/CLINT.scala:11:7
  output        io_bus_aw_ready,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input         io_bus_aw_valid,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input  [31:0] io_bus_aw_bits_addr,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input  [2:0]  io_bus_aw_bits_size,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input  [1:0]  io_bus_aw_bits_burst,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input  [2:0]  io_bus_aw_bits_prot,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  output        io_bus_w_ready,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input         io_bus_w_valid,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input  [31:0] io_bus_w_bits_data,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input  [3:0]  io_bus_w_bits_strb,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input         io_bus_w_bits_last,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
                io_bus_b_ready,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  output        io_bus_b_valid,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
                io_bus_ar_ready,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input         io_bus_ar_valid,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input  [31:0] io_bus_ar_bits_addr,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  input         io_bus_r_ready,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  output        io_bus_r_valid,	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
  output [31:0] io_bus_r_bits_data	// src/main/scala/mycpu/peripherals/Peripherals.scala:12:14
);

  wire        _writeBridge_io_req_valid;	// src/main/scala/mycpu/peripherals/CLINT.scala:16:27
  wire        _readBridge_io_req_valid;	// src/main/scala/mycpu/peripherals/CLINT.scala:15:27
  wire [31:0] _readBridge_io_req_bits_addr;	// src/main/scala/mycpu/peripherals/CLINT.scala:15:27
  reg         wValid;	// src/main/scala/mycpu/peripherals/CLINT.scala:23:23
  reg  [63:0] mtime;	// src/main/scala/mycpu/peripherals/CLINT.scala:29:22
  reg         rValid;	// src/main/scala/mycpu/peripherals/CLINT.scala:44:23
  reg  [31:0] rData;	// src/main/scala/mycpu/peripherals/CLINT.scala:45:25
  always @(posedge clock) begin	// src/main/scala/mycpu/peripherals/CLINT.scala:11:7
    if (reset) begin	// src/main/scala/mycpu/peripherals/CLINT.scala:11:7
      wValid <= 1'h0;	// src/main/scala/mycpu/peripherals/CLINT.scala:23:23
      mtime <= 64'h0;	// src/main/scala/mycpu/peripherals/CLINT.scala:29:22
      rValid <= 1'h0;	// src/main/scala/mycpu/peripherals/CLINT.scala:44:23
    end
    else begin	// src/main/scala/mycpu/peripherals/CLINT.scala:11:7
      wValid <= _writeBridge_io_req_valid;	// src/main/scala/mycpu/peripherals/CLINT.scala:16:27, :23:23
      mtime <= mtime + 64'h1;	// src/main/scala/mycpu/peripherals/CLINT.scala:29:22, :30:18
      rValid <= _readBridge_io_req_valid;	// src/main/scala/mycpu/peripherals/CLINT.scala:15:27, :44:23
    end
    if (_readBridge_io_req_valid)	// src/main/scala/mycpu/peripherals/CLINT.scala:15:27
      rData <= _readBridge_io_req_bits_addr[2] ? mtime[63:32] : mtime[31:0];	// src/main/scala/mycpu/peripherals/CLINT.scala:15:27, :29:22, :34:23, :35:23, :42:27, :45:25
  end // always @(posedge)
  AXI4LiteReadSlaveBridge readBridge (	// src/main/scala/mycpu/peripherals/CLINT.scala:15:27
    .clock               (clock),
    .reset               (reset),
    .io_axi_ar_ready     (io_bus_ar_ready),
    .io_axi_ar_valid     (io_bus_ar_valid),
    .io_axi_ar_bits_addr (io_bus_ar_bits_addr),
    .io_axi_r_ready      (io_bus_r_ready),
    .io_axi_r_valid      (io_bus_r_valid),
    .io_axi_r_bits_data  (io_bus_r_bits_data),
    .io_req_valid        (_readBridge_io_req_valid),
    .io_req_bits_addr    (_readBridge_io_req_bits_addr),
    .io_resp_valid       (rValid),	// src/main/scala/mycpu/peripherals/CLINT.scala:44:23
    .io_resp_bits_rdata  (rData)	// src/main/scala/mycpu/peripherals/CLINT.scala:45:25
  );	// src/main/scala/mycpu/peripherals/CLINT.scala:15:27
  AXI4LiteWriteSlaveBridge writeBridge (	// src/main/scala/mycpu/peripherals/CLINT.scala:16:27
    .clock                (clock),
    .reset                (reset),
    .io_axi_aw_ready      (io_bus_aw_ready),
    .io_axi_aw_valid      (io_bus_aw_valid),
    .io_axi_aw_bits_addr  (io_bus_aw_bits_addr),
    .io_axi_aw_bits_size  (io_bus_aw_bits_size),
    .io_axi_aw_bits_burst (io_bus_aw_bits_burst),
    .io_axi_aw_bits_prot  (io_bus_aw_bits_prot),
    .io_axi_w_ready       (io_bus_w_ready),
    .io_axi_w_valid       (io_bus_w_valid),
    .io_axi_w_bits_data   (io_bus_w_bits_data),
    .io_axi_w_bits_strb   (io_bus_w_bits_strb),
    .io_axi_w_bits_last   (io_bus_w_bits_last),
    .io_axi_b_ready       (io_bus_b_ready),
    .io_axi_b_valid       (io_bus_b_valid),
    .io_req_valid         (_writeBridge_io_req_valid),
    .io_req_bits_addr     (/* unused */),
    .io_req_bits_wdata    (/* unused */),
    .io_req_bits_wstrb    (/* unused */),
    .io_resp_valid        (wValid)	// src/main/scala/mycpu/peripherals/CLINT.scala:23:23
  );	// src/main/scala/mycpu/peripherals/CLINT.scala:16:27
endmodule

