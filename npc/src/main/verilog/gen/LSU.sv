// Generated by CIRCT firtool-1.128.0
module LSU(
  input         clock,
                reset,
  output        io_in_ready,
  input         io_in_valid,
  input  [31:0] io_in_bits_aluResult,
                io_in_bits_memWData,
  input  [4:0]  io_in_bits_rdAddr,
  input         io_in_bits_ctrl_regWen,
                io_in_bits_ctrl_memEn,
                io_in_bits_ctrl_memWen,
  input  [2:0]  io_in_bits_ctrl_memFunct3,
  input         io_out_ready,
  output        io_out_valid,
  output [31:0] io_out_bits_wbData,
  output [4:0]  io_out_bits_rdAddr,
  output        io_out_bits_regWen,
  input         io_axi_aw_ready,
  output        io_axi_aw_valid,
  output [31:0] io_axi_aw_bits_addr,
  input         io_axi_w_ready,
  output        io_axi_w_valid,
  output [31:0] io_axi_w_bits_data,
  output [3:0]  io_axi_w_bits_strb,
  output        io_axi_b_ready,
  input         io_axi_b_valid,
                io_axi_ar_ready,
  output        io_axi_ar_valid,
  output [31:0] io_axi_ar_bits_addr,
  output        io_axi_r_ready,
  input         io_axi_r_valid,
  input  [31:0] io_axi_r_bits_data
);

  reg  [2:0]       state;
  reg  [31:0]      reqReg_aluResult;
  reg  [31:0]      reqReg_memWData;
  reg  [4:0]       reqReg_rdAddr;
  reg              reqReg_ctrl_regWen;
  reg              reqReg_ctrl_memEn;
  reg              reqReg_ctrl_memWen;
  reg  [2:0]       reqReg_ctrl_memFunct3;
  reg  [31:0]      readDataReg;
  wire             _GEN = reqReg_ctrl_memFunct3 == 3'h0;
  wire [38:0]      _wdata_T_2 =
    {31'h0, reqReg_memWData[7:0]} << {34'h0, reqReg_aluResult[1:0], 3'h0};
  wire             _GEN_0 = reqReg_ctrl_memFunct3 == 3'h1;
  wire [4:0]       _wstrb_T_1 = 5'h3 << reqReg_aluResult[1:0];
  wire [46:0]      _wdata_T_5 =
    {31'h0, reqReg_memWData[15:0]} << {42'h0, reqReg_aluResult[1:0], 3'h0};
  wire             _GEN_1 = reqReg_ctrl_memFunct3 == 3'h2;
  wire [31:0]      shiftedData = readDataReg >> {27'h0, reqReg_aluResult[1:0], 3'h0};
  wire [7:0][31:0] _GEN_2 =
    {{32'h0},
     {32'h0},
     {{16'h0, shiftedData[15:0]}},
     {{24'h0, shiftedData[7:0]}},
     {32'h0},
     {readDataReg},
     {{{16{shiftedData[15]}}, shiftedData[15:0]}},
     {{{24{shiftedData[7]}}, shiftedData[7:0]}}};
  wire             _GEN_3 = state == 3'h1;
  wire             io_axi_ar_valid_0 = (|state) & _GEN_3;
  wire             _GEN_4 = state == 3'h2;
  wire             _GEN_5 = ~(|state) | _GEN_3;
  wire             io_axi_r_ready_0 = ~_GEN_5 & _GEN_4;
  wire             _GEN_6 = state == 3'h3;
  wire             io_axi_aw_valid_0 = ~(~(|state) | _GEN_3 | _GEN_4) & _GEN_6;
  wire             _GEN_7 = state == 3'h4;
  wire             _GEN_8 = ~(|state) | _GEN_3 | _GEN_4 | _GEN_6;
  wire             io_axi_w_valid_0 = ~_GEN_8 & _GEN_7;
  wire             _GEN_9 = state == 3'h5;
  wire             io_axi_b_ready_0 =
    ~(~(|state) | _GEN_3 | _GEN_4 | _GEN_6 | _GEN_7) & _GEN_9;
  wire             _GEN_10 = state == 3'h6;
  always @(posedge clock) begin
    automatic logic _GEN_11;
    _GEN_11 = io_axi_r_ready_0 & io_axi_r_valid;
    if (reset)
      state <= 3'h0;
    else if (|state) begin
      automatic logic [2:0]      _GEN_12 = _GEN_10 & io_out_ready ? 3'h0 : state;
      automatic logic [7:0][2:0] _GEN_13;
      _GEN_13 =
        {{_GEN_12},
         {_GEN_12},
         {io_axi_b_ready_0 & io_axi_b_valid ? 3'h6 : state},
         {io_axi_w_ready & io_axi_w_valid_0 ? 3'h5 : state},
         {io_axi_aw_ready & io_axi_aw_valid_0 ? 3'h4 : state},
         {_GEN_11 ? 3'h6 : state},
         {io_axi_ar_ready & io_axi_ar_valid_0 ? 3'h2 : state},
         {_GEN_12}};
      state <= _GEN_13[state];
    end
    else if (io_in_valid)
      state <= io_in_bits_ctrl_memEn ? {1'h0, io_in_bits_ctrl_memWen, 1'h1} : 3'h6;
    if (~(|state) & io_in_valid) begin
      reqReg_aluResult <= io_in_bits_aluResult;
      reqReg_memWData <= io_in_bits_memWData;
      reqReg_rdAddr <= io_in_bits_rdAddr;
      reqReg_ctrl_regWen <= io_in_bits_ctrl_regWen;
      reqReg_ctrl_memEn <= io_in_bits_ctrl_memEn;
      reqReg_ctrl_memWen <= io_in_bits_ctrl_memWen;
      reqReg_ctrl_memFunct3 <= io_in_bits_ctrl_memFunct3;
    end
    if (_GEN_5 | ~(_GEN_4 & _GEN_11)) begin
    end
    else
      readDataReg <= io_axi_r_bits_data;
  end // always @(posedge)
  assign io_in_ready = ~(|state);
  assign io_out_valid =
    ~(~(|state) | _GEN_3 | _GEN_4 | _GEN_6 | _GEN_7 | _GEN_9) & _GEN_10;
  assign io_out_bits_wbData =
    reqReg_ctrl_memEn & ~reqReg_ctrl_memWen
      ? _GEN_2[reqReg_ctrl_memFunct3]
      : reqReg_aluResult;
  assign io_out_bits_rdAddr = reqReg_rdAddr;
  assign io_out_bits_regWen = reqReg_ctrl_regWen;
  assign io_axi_aw_valid = io_axi_aw_valid_0;
  assign io_axi_aw_bits_addr = reqReg_aluResult;
  assign io_axi_w_valid = io_axi_w_valid_0;
  assign io_axi_w_bits_data =
    _GEN
      ? _wdata_T_2[31:0]
      : _GEN_0 ? _wdata_T_5[31:0] : _GEN_1 ? reqReg_memWData : 32'h0;
  assign io_axi_w_bits_strb =
    _GEN_8 | ~_GEN_7
      ? 4'h0
      : _GEN ? 4'h1 << reqReg_aluResult[1:0] : _GEN_0 ? _wstrb_T_1[3:0] : {4{_GEN_1}};
  assign io_axi_b_ready = io_axi_b_ready_0;
  assign io_axi_ar_valid = io_axi_ar_valid_0;
  assign io_axi_ar_bits_addr = reqReg_aluResult;
  assign io_axi_r_ready = io_axi_r_ready_0;
endmodule

