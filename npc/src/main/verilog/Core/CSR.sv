// Generated by CIRCT firtool-1.128.0
module CSR(	// src/main/scala/mycpu/core/components/CSR.scala:7:7
  input         clock,	// src/main/scala/mycpu/core/components/CSR.scala:7:7
                reset,	// src/main/scala/mycpu/core/components/CSR.scala:7:7
  input  [1:0]  io_cmd,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
  input  [11:0] io_addr,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
  input  [31:0] io_wdata,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
  output [31:0] io_rdata,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
  input  [31:0] io_pc,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
  input         io_isEcall,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
                io_isMret,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
  output [31:0] io_evec,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
                io_epc,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
                io_debug_mtvec,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
                io_debug_mepc,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
                io_debug_mstatus,	// src/main/scala/mycpu/core/components/CSR.scala:8:14
                io_debug_mcause	// src/main/scala/mycpu/core/components/CSR.scala:8:14
);

  reg  [31:0] mstatus;	// src/main/scala/mycpu/core/components/CSR.scala:37:24
  reg  [31:0] mtvec;	// src/main/scala/mycpu/core/components/CSR.scala:38:24
  reg  [31:0] mepc;	// src/main/scala/mycpu/core/components/CSR.scala:39:24
  reg  [31:0] mcause;	// src/main/scala/mycpu/core/components/CSR.scala:40:24
  wire        _io_rdata_T = io_addr == 12'h300;	// src/main/scala/mycpu/core/components/CSR.scala:51:38
  wire        _io_rdata_T_2 = io_addr == 12'h305;	// src/main/scala/mycpu/core/components/CSR.scala:51:38
  wire        _io_rdata_T_4 = io_addr == 12'h341;	// src/main/scala/mycpu/core/components/CSR.scala:51:38
  wire        _io_rdata_T_6 = io_addr == 12'h342;	// src/main/scala/mycpu/core/components/CSR.scala:51:38
  wire [31:0] io_rdata_0 =
    _io_rdata_T_6
      ? mcause
      : _io_rdata_T_4 ? mepc : _io_rdata_T_2 ? mtvec : _io_rdata_T ? mstatus : 32'h0;	// src/main/scala/mycpu/core/components/CSR.scala:37:24, :38:24, :39:24, :40:24, :51:38
  always @(posedge clock) begin	// src/main/scala/mycpu/core/components/CSR.scala:7:7
    if (reset) begin	// src/main/scala/mycpu/core/components/CSR.scala:7:7
      mstatus <= 32'h1800;	// src/main/scala/mycpu/core/components/CSR.scala:37:24
      mtvec <= 32'h0;	// src/main/scala/mycpu/core/components/CSR.scala:38:24
      mepc <= 32'h0;	// src/main/scala/mycpu/core/components/CSR.scala:39:24
      mcause <= 32'h0;	// src/main/scala/mycpu/core/components/CSR.scala:40:24
    end
    else begin	// src/main/scala/mycpu/core/components/CSR.scala:7:7
      automatic logic [3:0][31:0] _GEN =
        {{io_rdata_0 & ~io_wdata}, {io_rdata_0 | io_wdata}, {io_wdata}, {io_rdata_0}};	// src/main/scala/mycpu/core/components/CSR.scala:51:38, :63:41, :65:24, :66:{24,26}
      automatic logic             _GEN_0 = io_isEcall | io_isMret;	// src/main/scala/mycpu/core/components/CSR.scala:37:24, :71:21, :75:27, :77:21
      if (_GEN_0 | ~((|io_cmd) & _io_rdata_T)) begin	// src/main/scala/mycpu/core/components/CSR.scala:37:24, :51:38, :69:20, :71:21, :75:27, :77:21, :78:22, :79:30
      end
      else	// src/main/scala/mycpu/core/components/CSR.scala:37:24, :71:21, :75:27, :77:21
        mstatus <= _GEN[io_cmd];	// src/main/scala/mycpu/core/components/CSR.scala:37:24, :63:41
      if (_GEN_0 | ~(|io_cmd) | _io_rdata_T | ~_io_rdata_T_2) begin	// src/main/scala/mycpu/core/components/CSR.scala:37:24, :38:24, :51:38, :69:20, :71:21, :75:27, :77:21, :78:22
      end
      else	// src/main/scala/mycpu/core/components/CSR.scala:38:24, :71:21, :75:27, :77:21, :78:22
        mtvec <= _GEN[io_cmd];	// src/main/scala/mycpu/core/components/CSR.scala:38:24, :63:41
      if (io_isEcall) begin	// src/main/scala/mycpu/core/components/CSR.scala:8:14
        mepc <= io_pc;	// src/main/scala/mycpu/core/components/CSR.scala:39:24
        mcause <= 32'hB;	// src/main/scala/mycpu/core/components/CSR.scala:40:24
      end
      else begin	// src/main/scala/mycpu/core/components/CSR.scala:8:14
        if (io_isMret | ~(|io_cmd) | _io_rdata_T | _io_rdata_T_2 | ~_io_rdata_T_4) begin	// src/main/scala/mycpu/core/components/CSR.scala:38:24, :39:24, :51:38, :69:20, :75:27, :77:21, :78:22
        end
        else	// src/main/scala/mycpu/core/components/CSR.scala:39:24, :75:27, :77:21, :78:22
          mepc <= _GEN[io_cmd];	// src/main/scala/mycpu/core/components/CSR.scala:39:24, :63:41
        if (io_isMret | ~(|io_cmd) | _io_rdata_T | _io_rdata_T_2 | _io_rdata_T_4
            | ~_io_rdata_T_6) begin	// src/main/scala/mycpu/core/components/CSR.scala:38:24, :40:24, :51:38, :69:20, :75:27, :77:21, :78:22
        end
        else	// src/main/scala/mycpu/core/components/CSR.scala:40:24, :75:27, :77:21, :78:22
          mcause <= _GEN[io_cmd];	// src/main/scala/mycpu/core/components/CSR.scala:40:24, :63:41
      end
    end
  end // always @(posedge)
  assign io_rdata = io_rdata_0;	// src/main/scala/mycpu/core/components/CSR.scala:7:7, :51:38
  assign io_evec = mtvec;	// src/main/scala/mycpu/core/components/CSR.scala:7:7, :38:24
  assign io_epc = mepc;	// src/main/scala/mycpu/core/components/CSR.scala:7:7, :39:24
  assign io_debug_mtvec = mtvec;	// src/main/scala/mycpu/core/components/CSR.scala:7:7, :38:24
  assign io_debug_mepc = mepc;	// src/main/scala/mycpu/core/components/CSR.scala:7:7, :39:24
  assign io_debug_mstatus = mstatus;	// src/main/scala/mycpu/core/components/CSR.scala:7:7, :37:24
  assign io_debug_mcause = mcause;	// src/main/scala/mycpu/core/components/CSR.scala:7:7, :40:24
endmodule

